<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Text Data Acquisition and Corpus Construction</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.6;
      max-width: 900px;
      margin: 0 auto;
      padding: 24px;
      color: #111827;
      background: #ffffff;
    }
    h1, h2, h3 { color: #111827; }
    a { color: #2563eb; text-decoration: none; }
    a:hover { text-decoration: underline; }
    code { background-color: #f3f4f6; padding: 2px 6px; border-radius: 6px; }
    pre { background-color: #0b1020; color: #e5e7eb; padding: 16px; border-radius: 10px; overflow-x: auto; }
    pre code { background: transparent; padding: 0; }
    blockquote { border-left: 4px solid #e5e7eb; margin: 0; padding-left: 16px; color: #4b5563; }
    table { width: 100%; border-collapse: collapse; margin: 16px 0; }
    th, td { border: 1px solid #e5e7eb; padding: 8px; text-align: left; }
    th { background: #f9fafb; }
    hr { border: none; border-top: 1px solid #e5e7eb; margin: 24px 0; }
  </style>
</head>
<body>
<h1 id="topic-text-data-acquisition-and-corpus-construction">Topic: Text Data Acquisition and Corpus Construction</h1>
<h2 id="1-formal-definition-what-is-it-and-how-can-we-use-it">1) Formal definition (what is it, and how can we use it?)</h2>
<p>Text data acquisition and corpus construction refers to the process of gathering and organizing text data into a structured collection (a corpus) that can be used for various natural language processing (NLP) tasks.</p>
<ul>
<li>
<p><strong>Text Data Acquisition:</strong> This involves identifying sources of textual data, such as websites, books, news articles, social media feeds, and databases, and then collecting that data through methods like web scraping, API calls, manual downloads, or using existing datasets.  Crucially, this step includes considerations of legality (copyright, terms of service), ethics (privacy, bias), and data quality (noise, inconsistency).</p>
</li>
<li>
<p><strong>Corpus Construction:</strong> Once text data is acquired, it needs to be organized and structured into a corpus.  This involves cleaning the data (removing irrelevant content, handling encoding issues), potentially annotating the data (part-of-speech tagging, named entity recognition, sentiment analysis), and storing it in a format that is suitable for NLP algorithms (e.g., plain text files, XML, databases).  The specific structure of the corpus will depend on the intended application. A corpus can be as simple as a collection of text files, or it can be a highly structured database with rich metadata and annotations.</p>
</li>
</ul>
<p><strong>How can we use it?</strong></p>
<p>A well-constructed corpus is essential for:</p>
<ul>
<li><strong>Training NLP models:</strong> Machine learning models learn patterns from data. A corpus provides the training data for tasks like text classification, machine translation, and language modeling.</li>
<li><strong>Evaluating NLP models:</strong>  A separate corpus (test set) is needed to evaluate the performance of trained models.</li>
<li><strong>Linguistic analysis:</strong> Corpora allow linguists to study language usage patterns, frequency of words and phrases, and changes in language over time.</li>
<li><strong>Information retrieval:</strong>  Corpora can be used to build search engines and other information retrieval systems.</li>
<li><strong>Developing language resources:</strong> Corpora serve as a basis for creating lexicons, grammars, and other language resources.</li>
<li><strong>Building question answering system:</strong> The data is used to train the model to answer questions given the source text.</li>
</ul>
<h2 id="2-application-scenario">2) Application scenario</h2>
<p><strong>Scenario:</strong>  A company wants to build a sentiment analysis model to analyze customer reviews of their products on Amazon.</p>
<p><strong>Text Data Acquisition:</strong></p>
<ul>
<li><strong>Source:</strong>  Amazon product review pages.</li>
<li><strong>Method:</strong> Web scraping using Python libraries like <code>BeautifulSoup</code> and <code>requests</code> to extract the review text and rating scores.  Consider using Amazon's Product Advertising API (if available and permissible) for a more structured approach.</li>
</ul>
<p><strong>Corpus Construction:</strong></p>
<ol>
<li><strong>Cleaning:</strong>  Remove HTML tags, irrelevant characters, and duplicate reviews.  Handle potential encoding issues (e.g., UTF-8).</li>
<li><strong>Annotation:</strong>  The rating score (e.g., 1-5 stars) can be used as a label for sentiment (e.g., 1-2 stars = negative, 3 stars = neutral, 4-5 stars = positive).  Manual annotation might be needed to refine labels if the star ratings are not reliable.</li>
<li><strong>Structuring:</strong>  Store the reviews and their sentiment labels in a CSV file or a database.  Consider adding metadata such as product ID, reviewer ID, and date of the review.</li>
<li><strong>Splitting:</strong> Divide the corpus into training, validation, and testing sets for model development and evaluation.</li>
</ol>
<h2 id="3-python-method-if-possible">3) Python method (if possible)</h2>
<pre class="codehilite"><code class="language-python">import requests
from bs4 import BeautifulSoup
import pandas as pd

def scrape_amazon_reviews(url, num_pages=1):
    &quot;&quot;&quot;
    Scrapes Amazon product reviews from a given URL.

    Args:
        url (str): The URL of the Amazon product review page.
        num_pages (int): The number of pages to scrape.

    Returns:
        pandas.DataFrame: A DataFrame containing the scraped reviews and ratings.
    &quot;&quot;&quot;
    reviews = []
    ratings = []

    for page in range(1, num_pages + 1):
        page_url = f&quot;{url}&amp;pageNumber={page}&quot;
        response = requests.get(page_url)
        response.raise_for_status()  # Raise an exception for bad status codes

        soup = BeautifulSoup(response.content, 'html.parser')
        review_elements = soup.find_all('span', class_='a-size-base review-text')
        rating_elements = soup.find_all('i', class_='a-icon-star') # Find all rating elements

        # Only proceed if both reviews and ratings are present
        if review_elements and rating_elements:
            # Extract review text
            for review_element in review_elements:
                reviews.append(review_element.text.strip())

            # Extract ratings: Take the 1st element for each page (typically the rating title), then
            # slice it from the 2nd element onwards for each subsequent review
            for i in range(1, len(rating_elements)):
                rating_text = rating_elements[i].text.strip()
                rating = rating_text.split(' ')[0]  # Extract the rating number from the text e.g., '4.0 out of 5 stars' -&gt; '4.0'
                ratings.append(float(rating))

    df = pd.DataFrame({'review': reviews, 'rating': ratings})
    return df

# Example usage:  Replace with a real Amazon product review URL.  This is a placeholder.
amazon_url = &quot;https://www.amazon.com/product-reviews/B0XXXXXXXXXX/ref=cm_cr_dp_d_show_all_btm?ie=UTF8&amp;reviewerType=all_reviews&quot;
try:
    review_df = scrape_amazon_reviews(amazon_url, num_pages=2) # Scrape 2 pages
    print(review_df.head())
except requests.exceptions.RequestException as e:
    print(f&quot;An error occurred during the request: {e}&quot;)
except Exception as e:
    print(f&quot;An unexpected error occurred: {e}&quot;)
</code></pre>

<p><strong>Explanation:</strong></p>
<ol>
<li><strong><code>scrape_amazon_reviews(url, num_pages)</code>:</strong>  This function takes the Amazon product review URL and the number of pages to scrape as input.</li>
<li><strong><code>requests.get(page_url)</code>:</strong>  Uses the <code>requests</code> library to fetch the HTML content of the review page.</li>
<li><strong><code>BeautifulSoup(response.content, 'html.parser')</code>:</strong>  Parses the HTML content using <code>BeautifulSoup</code>.</li>
<li><strong><code>soup.find_all(...)</code>:</strong>  Finds all the review text elements (spans with class <code>a-size-base review-text</code>) and the rating elements (i elements with class <code>a-icon-star</code>) on the page.  <strong>Important:</strong>  Amazon's HTML structure can change, so these selectors might need to be updated.</li>
<li><strong><code>review_element.text.strip()</code>:</strong> Extracts the review text from each element and removes leading/trailing whitespace.</li>
<li>The function iterates through the found elements and extracts the text and ratings.  It includes error handling.</li>
<li><strong><code>pd.DataFrame({'review': reviews, 'rating': ratings})</code>:</strong>  Creates a Pandas DataFrame to store the scraped data.</li>
<li><strong>Error Handling:</strong> The <code>try...except</code> block catches potential <code>requests</code> exceptions (e.g., network errors, invalid URLs) and other exceptions during parsing.</li>
</ol>
<p><strong>Important Considerations:</strong></p>
<ul>
<li><strong>Amazon's Terms of Service:</strong>  Web scraping can violate Amazon's terms of service.  Use caution and adhere to their guidelines. Consider using the Amazon Product Advertising API if available.</li>
<li><strong>Rate Limiting:</strong>  Amazon might implement rate limiting to prevent excessive scraping. Implement delays between requests to avoid being blocked.</li>
<li><strong>HTML Structure Changes:</strong>  Amazon's website structure can change frequently, which could break the scraper.  Monitor the scraper regularly and update the selectors if needed.</li>
<li><strong>Robustness:</strong>  This is a basic example.  A production-quality scraper would need to handle various error conditions and edge cases.</li>
<li><strong>Legal and Ethical Considerations:</strong>  Always be mindful of privacy and legal regulations when collecting and using data.  Obtain consent where necessary.</li>
<li><strong>API Alternatives:</strong> Always check if the platform offers an API before resorting to scraping, as APIs are designed for programmatic data access and are generally more reliable and compliant with the platform's rules.</li>
</ul>
<h2 id="4-follow-up-question">4) Follow-up question</h2>
<p>How do you handle imbalanced datasets in corpus construction, where one class (e.g., positive sentiment reviews) is significantly more prevalent than others (e.g., negative sentiment reviews), and how does this imbalance affect model training and evaluation?</p>
</body>
</html>
